{"version":3,"sources":["webpack:///./src/views/Cart.vue","webpack:///./src/views/Cart.vue?7a75"],"names":["class","style","colspan","for","type","active","isLoading","cart","carts","item","key","id","removeCartItem","disabled","loadingStatus","loadingItem","product","title","coupon","qty","unit","final_total","total","ref","createOrder","errors","name","placeholder","rules","form","user","email","tel","address","cols","rows","message","data","coupon_code","created","this","getCart","methods","url","$http","get","then","response","success","alert","delete","order","post","$refs","resetForm","render"],"mappings":"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","file":"assets/js/chunk-2d2102cc.06888bb2.js","sourcesContent":["<template>\n  <div class=\"about\">\n    <Loading :active=\"isLoading\"></Loading>\n    <h1>購物車頁面</h1>\n    <div class=\"container\">\n      <div class=\"row justify-content-center\">\n        <div class=\"col-md-6\">\n          <table class=\"table align-middle\">\n            <thead>\n              <tr>\n                <th></th>\n                <th>品名</th>\n                <th style=\"width: 110px\">數量</th>\n                <th>單價</th>\n              </tr>\n            </thead>\n            <tbody>\n              <!-- 判斷 購物車內是否有資料 -->\n              <template v-if=\"cart.carts\">\n                <!-- 把購物車列表抓出來 -->\n                <tr v-for=\"item in cart.carts\" :key=\"item.id\">\n                  <td>\n                    <button\n                      type=\"button\"\n                      class=\"btn btn-outline-danger btn-sm\"\n                      @click=\"removeCartItem(item.id)\"\n                      :disabled=\"loadingStatus.loadingItem === item.id\"\n                    >\n                      <i\n                        class=\"fas fa-spinner fa-pulse\"\n                        v-if=\"loadingStatus.loadingItem === item.id\"\n                      ></i>\n                      移除購物車\n                    </button>\n                  </td>\n                  <td>\n                    {{ item.product.title }}\n                    <div class=\"text-success\" v-if=\"item.coupon\">\n                      已套用優惠券\n                    </div>\n                  </td>\n                  <td>\n                    <div class=\"input-group input-group-sm\">\n                      <!-- 查 unit -->\n                       {{item.qty}} / {{ item.product.unit }}\n                    </div>\n                  </td>\n                  <!-- 查 text-end -->\n                  <td class=\"text-end\">\n                    <!-- 查 small -->\n                    <small\n                      v-if=\"cart.final_total !== cart.total\"\n                      class=\"text-success\"\n                      >折扣價：</small\n                    >\n                    {{ item.final_total }}\n                  </td>\n                </tr>\n              </template>\n            </tbody>\n            <tfoot>\n              <tr>\n                <!-- 查 colspan=\"3\" -->\n                <td colspan=\"3\" class=\"text-end\">總計</td>\n                <td class=\"text-end\">{{ cart.total }}</td>\n              </tr>\n              <tr v-if=\"cart.final_total !== cart.total\">\n                <td colspan=\"3\" class=\"text-end text-success\">折扣價</td>\n                <td class=\"text-end text-success\">{{ cart.final_total }}</td>\n              </tr>\n            </tfoot>\n          </table>\n        </div>\n      </div>\n      <div class=\"my-5 row justify-content-center\">\n        <!-- 查 v-slot=\"{ errors }\" @submit=\"createOrder\" -->\n        <Form ref=\"form\" class=\"col-md-6\" v-slot=\"{ errors }\" @submit=\"createOrder\">\n          <div class=\"mb-3\">\n            <label for=\"email\" class=\"form-label\">Email</label>\n            <!-- :class=\"{ 'is-invalid': errors['email'] }\"\n\t\t\t\t\t\t動態綁定 class 的用法 當 errors 陣列中 有包含 email 這個值\n\t\t\t\t\t\t那就綁定 is_enabled 這個 class。 -->\n            <Field\n              id=\"email\"\n              name=\"email\"\n              type=\"email\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['email'] }\"\n              placeholder=\"請輸入 Email\"\n              rules=\"email|required\"\n              v-model=\"form.user.email\"\n            ></Field>\n            <ErrorMessage name=\"email\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n\n          <div class=\"mb-3\">\n            <label for=\"name\" class=\"form-label\">收件人姓名</label>\n            <Field\n              id=\"name\"\n              name=\"姓名\"\n              type=\"text\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['姓名'] }\"\n              placeholder=\"請輸入姓名\"\n              rules=\"required\"\n              v-model=\"form.user.name\"\n            ></Field>\n            <ErrorMessage name=\"姓名\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n\n          <div class=\"mb-3\">\n            <label for=\"tel\" class=\"form-label\">收件人電話</label>\n            <Field\n              id=\"tel\"\n              name=\"電話\"\n              type=\"text\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['電話'] }\"\n              placeholder=\"請輸入電話\"\n              rules=\"required\"\n              v-model=\"form.user.tel\"\n            ></Field>\n            <ErrorMessage name=\"電話\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n\n          <div class=\"mb-3\">\n            <label for=\"address\" class=\"form-label\">收件人地址</label>\n            <Field\n              id=\"address\"\n              name=\"地址\"\n              type=\"text\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['地址'] }\"\n              placeholder=\"請輸入地址\"\n              rules=\"required\"\n              v-model=\"form.user.address\"\n            ></Field>\n            <ErrorMessage name=\"地址\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n\n          <div class=\"mb-3\">\n            <label for=\"message\" class=\"form-label\">留言</label>\n            <textarea\n              name=\"\"\n              id=\"message\"\n              class=\"form-control\"\n              cols=\"30\"\n              rows=\"10\"\n              v-model=\"form.message\"\n            ></textarea>\n          </div>\n          <div class=\"text-end\">\n            <button type=\"submit\" class=\"btn btn-danger\">送出訂單</button>\n          </div>\n        </Form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Cart',\n  data() {\n    return {\n      loadingStatus: {\n        loadingItem: ''\n      },\n      isLoading: false,\n      cart: {},\n      form: {\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: '',\n        },\n        message: '',\n      },\n      coupon_code: '',\n    };\n  },\n  created() {\n    this.getCart();\n  },\n  methods: {\n    // 取得購物車列表\n    getCart() {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http.get(url).then((response) => {\n        if (response.data.success) {\n          this.cart = response.data.data;\n          this.isLoading = false;\n        } else {\n          alert(response.data.message);\n        }\n      });\n    },\n    // 刪除某一筆購物車資料\n\t\t// [API]: /api/:api_path/cart/:id\n\t\t// [方法]: delete\n    removeCartItem(id) {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`;\n      this.loadingStatus.loadingItem = id;\n      this.$http.delete(url).then((response) => {\n        if (response.data.success) {\n          alert(response.data.message);\n          this.getCart();\n        } else {\n          alert(response.data.message);\n        }\n        this.loadingStatus.loadingItem = '';\n        this.isLoading = false;\n      });\n    },\n    // 結帳頁面\n    createOrder() {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order`;\n      const order = this.form;\n      this.$http.post(url, { data: order }).then((response) => {\n        if (response.data.success) {\n          alert(response.data.message);\n          this.$refs.form.resetForm();\n        } else {\n          alert(response.data.message);\n        }\n        this.isLoading = false;\n      });\n    },\n  },\n};\n</script>","import { render } from \"./Cart.vue?vue&type=template&id=50f6917f\"\nimport script from \"./Cart.vue?vue&type=script&lang=js\"\nexport * from \"./Cart.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}